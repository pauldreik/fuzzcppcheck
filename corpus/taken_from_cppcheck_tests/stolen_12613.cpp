void reset() {
    for(auto& e : array)
        foo(e);
}