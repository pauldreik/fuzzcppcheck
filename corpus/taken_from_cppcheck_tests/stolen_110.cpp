void foo(char* p) {
    while (!p) p = buf;
}