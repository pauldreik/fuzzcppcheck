struct Foo {
    void foo() {
        Bar b;
        b.takeFoo(this);
    }
};